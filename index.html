<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>3d-hand-tracking by OneKay</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>3d-hand-tracking</h1>
        <p>组员：张倩、曾光、万凯、李超</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/OneKay/3D-Hand-Tracking" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/OneKay/3D-Hand-Tracking/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/OneKay/3D-Hand-Tracking/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1>
<a id="update-1create-a-webpage" class="anchor" href="#update-1create-a-webpage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update 1:create a webpage</h1>

<h4>
<a id="2016516" class="anchor" href="#2016516" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2016.5.16</h4>

<p>This week, we create a webpage and choose the first project in the list: finger tracking as our future work.</p>

<hr>

<h1>
<a id="update-2确定项目方案与环境搭建" class="anchor" href="#update-2%E7%A1%AE%E5%AE%9A%E9%A1%B9%E7%9B%AE%E6%96%B9%E6%A1%88%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update 2:确定项目方案与环境搭建</h1>

<h4>
<a id="2016526" class="anchor" href="#2016526" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2016.5.26</h4>

<p>利用finger tracking 技术可以实现手势的捕抓，以及3D模型的重建，但另一方面，出于实用性和趣味性的考虑，我们希望能够实现和环境的交互，改变或者是调整环境中的东西，比如环境中有一个魔方，希望能够实现魔方的旋转；更进一步，我们希望可以实现和3D场景的交互，比如说捡起环境中的魔方，或者是将魔方移到别的位置。<br>
因此，我们使用Leap Motion来实现这一功能。Leap Motion能够感知移动的双手，以一种新的方式与电脑交互，它以1%毫米的精度追踪你的10根手指，150°超宽幅的空间视场，用户可以像在真实世界一样随意在3D的空间移动双手。<br>
Leap Motion与Unity集成：在<a href="https://developer.leapmotion.com/get-started">https://developer.leapmotion.com/get-started</a>上下载leap motion的sdk，为了集成Unity，还需要下载Leap Motion Unity Core Assets，具体内容参考<a href="http://www.cocoachina.com/game/20150716/12625.html">http://www.cocoachina.com/game/20150716/12625.html</a><br>
配置好环境后，运行自带demo如图所示：<img src="http://i4.buimg.com/5f40f122092ec057.jpg" alt="image"></p>

<hr>

<h1>
<a id="update-3实现碰撞检测与旋转" class="anchor" href="#update-3%E5%AE%9E%E7%8E%B0%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E4%B8%8E%E6%97%8B%E8%BD%AC" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update 3:实现碰撞检测与旋转</h1>

<h4>
<a id="201662" class="anchor" href="#201662" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2016.6.2</h4>

<p>本周我们做了一个实验来实现物体的碰撞检测与旋转，以及简单的leapmotion交互。
在Core Assets中最核心的资源就是HandController,这个是允许我们和Leap Motion设备交互的主要预制体，它作为锚点将双手渲染到场景中。<br>
<img src="http://7xrn7f.com1.z0.glb.clouddn.com/16-6-2/71351476.jpg" alt="HandController"><br>
在hc的脚本中包含了左右手的模型，包括    </p>

<p>图像模型<br>
物理模型<br>
工具模型<br>
是否头戴的选项（主要用于协同oculus的开发）<br>
以及其他一些可供调整的选项     </p>

<p>需要注意的一点是，由于Unity是以米为单位，而LeapMotion是以毫米为单位，因此这里我们要把scale参数设的大一些，才能使手的大小正常。<br>
我们将HandController拖到场景中，将坐标设置为（0，-3，3），摄像机应与HandController在同一区域，将摄像机的坐标为（0，0，-3）。<br>
接下来我们在场景上放入4个立方体，给其中3个添加Material颜色，分别为红色(3,-1,3),蓝色(0,-1,3),橙色(-3,-1,3),最上方的为无色的立方体(0,1,3)，通过手指选择下方有色的立方体，来给无色立方体上色。<br>
建好的场景如下图：<br>
<img src="http://7xrn7f.com1.z0.glb.clouddn.com/16-6-2/96781415.jpg" alt="Scene">
为了实现手指选择功能就需要实现碰撞检测，在Unity中我们可以使用OnTriggerEnter函数来检测碰撞，这个函数输入一个Collider对象，因此要想实现碰撞检测，我们需要给之前放入的Cube设置碰撞器，具体内容参考<a href="http://bbs.9ria.com/thread-223673-1-1.html">物理引擎：碰撞器</a>，这里我们设置的是Mesh Collider。<br>
实现了碰撞检测后，我们就可以写一个与立方体交互的脚本    </p>

<div class="highlight highlight-source-cs"><pre>    <span class="pl-k">using</span> UnityEngine<span class="pl-k">;</span>
    <span class="pl-k">using</span> System.Collections<span class="pl-k">;</span>

    <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">CubeInteraction</span> : <span class="pl-k">MonoBehaviour</span> {
        <span class="pl-k">public</span> Color c;
        <span class="pl-k">public</span> <span class="pl-k">static</span> Color selectedColor;
        <span class="pl-k">public</span> <span class="pl-k">bool</span> selectable = <span class="pl-c1">false</span>;
        <span class="pl-k">void</span> <span class="pl-en">OnTriggerEnter</span>(<span class="pl-k">Collider</span> <span class="pl-smi">c</span>)
        {
            <span class="pl-k">if</span> (c.gameObject.transform.parent.name.Equals(<span class="pl-s"><span class="pl-pds">"</span>index<span class="pl-pds">"</span></span>))
            {
                <span class="pl-k">if</span> (<span class="pl-c1">this</span>.selectable)
                {
                    CubeInteraction.selectedColor = <span class="pl-c1">this</span>.c;
                    <span class="pl-c1">this</span>.transform.Rotate(Vector3.up, <span class="pl-c1">33</span>);
                    <span class="pl-k">return</span>;
                }
                transform.gameObject.GetComponent&lt;Renderer&gt;().material.color = CubeInteraction.selectedColor;
            }
        }
    }   </pre></div>

<p>逻辑的核心在OnTriggerEnter(Collider c) 函数内，我们检查与可选择物体的碰撞对象是不是食指，如果是，我们设置为该颜色。我们设计这么一种交互，当食指与可选择颜色的立方体产生碰撞的后，让它旋转33度，这样我们能更直观的看出交互效果。 然后获得立方体的Renderer组件，使它的颜色变为我们选择的颜色。    </p>

<p>演示视频：<iframe height=498 width=510 src="http://player.youku.com/embed/XMTU5NDQxMzA3Mg==" frameborder=0 allowfullscreen></iframe>    </p>


      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/OneKay">OneKay</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
